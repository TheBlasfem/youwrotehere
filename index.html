<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Simple markers</title>
    <style>
      html, body, #map-canvas {
        height: 800px;
        margin: 0px;
        padding: 0px
      }
    </style>
    <link rel="stylesheet" href="style.css">
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.5/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.0rc1/angular-route.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="script.js"></script>
   
  </head>

  <body ng-app="myapp">
  	
  	<div id="global" ng-controller="GlobalController">
		<div id="template" ng-view></div>
		<div id="map-canvas"></div>
	</div>


	     <script>
function initialize() {
  var scope = angular.element($("#global")).scope();
  scope.$apply(function(){
  	var myLatlng = new google.maps.LatLng(scope.data[0].coordenadas[0],scope.data[0].coordenadas[1]);
  	var mapOptions = {
    	zoom: 4,
    	center: myLatlng
  	}
  	var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

        scope.data.forEach(function(item){
        	new google.maps.Marker({
			    position: new google.maps.LatLng(item.coordenadas[0],item.coordenadas[1]),
			    map: map,
			    title: item.texto
			});
        });
    });
}

google.maps.event.addDomListener(window, 'load', initialize);


    </script>
  </body>
</html>
